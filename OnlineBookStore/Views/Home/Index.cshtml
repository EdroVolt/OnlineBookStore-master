@model IEnumerable<BookStore.Models.book>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="row">
    <!-- ASIDE -->
    <div class=" col-12 col-lg-3">
        <!-- aside Widget -->
        <form action="" method="" role="">
            <div class="accordion" id="accordionExample">
                <div class="card">
                    <div class="card-header p-0 collapsed" id="headingOne" type="button"
                         data-toggle="collapse" data-target="#collapseOne" aria-expanded="true"
                         aria-controls="collapseOne">
                        <h2 class="mb-0">Categories</h2>
                    </div>
                    <div id="collapseOne" class="collapse" aria-labelledby="headingOne"
                         data-parent="#accordionExample">
                        <div class="card-body bg-light">
                            <div class="form-check mb-2">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="radio" name="filters" value="engineering">
                                    engineering
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="radio" name="filters" value="Arab poetry">
                                    Arab poetry
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="radio" name="filters" value="horror">
                                    horror
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="radio" name="filters" value="romance">
                                    romance
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="radio" name="filters" value="religious">
                                    religious
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="radio" name="filters" value="politician">
                                    politician
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="radio" name="filters" value="child">
                                    child
                                </label>
                            </div>
                            @*<button type="submit" name="btnApply" class="btn btn-light btn-sm mt-2 ">
                                <i class="fa fa-filter"></i>
                                Apply
                            </button>*@
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="mt-2">
            <div class="accordion" id="accordionExample">
                <div class="card ">
                    <div class="card-header p-0" id="headingTwo" type="button" data-toggle="collapse"
                         data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                        <h2 class="mb-0">
                            Price
                        </h2>
                    </div>
                    <div id="collapseTwo" class="collapse show" aria-labelledby="headingTwo"
                         data-parent="#accordionExample">
                        <div class="card-body bg-light">
                            <div class="price-filter">
                                <div id="price-slider" class="noUi-target noUi-ltr noUi-horizontal">
                                </div>
                                <span class="d-block text-center">From</span>
                                <div class="input-number price-min">
                                    <input id="price-min" type="number">
                                    <span class="qty-up">+</span>
                                    <span class="qty-down">-</span>
                                </div>
                                <span class="d-block text-center">To</span>
                                <div class="input-number price-max">
                                    <input id="price-max" type="number">
                                    <span class="qty-up">+</span>
                                    <span class="qty-down">-</span>
                                </div>
                            </div>
                            <button name="btnApply" class="btn btn-light btn-sm mt-2">
                                <i class="fa fa-filter"></i>
                                Apply
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /aside Widget -->
    </div>
    <!-- /ASIDE -->
    <!-- STORE -->
    <div id="store" class="mt-2 mt-lg-0 col-12 col-lg-9">
        <!-- store top filter -->
        <div class="store-filter">
            <div class="store-sort">
                <label>
                    Sort By:
                    <select class="input-select">
                        <option value="T0">Title A-Z</option>
                        <option value="T1">Title Z-A</option>
                        <option value="A0">Author A-Z</option>
                        <option value="A1">Author Z-A</option>
                        <option value="P0">Price Asc</option>
                        <option value="P1">Price Desc</option>
                        <option value="N0">nearby</option>
                    </select>
                </label>
            </div>
        </div>
        <!-- /store top filter -->
        <!-- store products -->
        <div class="row">
            @foreach (var item in Model)
            {
                <!-- product -->
                <div class="col-6 col-lg-4">
                    <div class="product">
                        <div class="product-img">
                            <img class="img-fluid" src="~/Uploads/@Html.DisplayFor(aa =>item.book_image)" alt="">
                        </div>
                        <div class="product-body">
                            <p class="product-category">
                                @Html.DisplayFor(modelItem => item.category.category_name)
                            </p>
                            @{var a = Html.DisplayFor(modelItem => item.book_title).ToString();}
                            <h3 class="product-name">@a</h3>
                            <h4 class="product-price">@Html.DisplayFor(modelItem => item.book_cost) $</h4>
                            @Html.ActionLink("Details", "Details","books", new { id = item.Id },null)

                        </div>
                    </div>
                </div>
                <!-- /product -->
            }

        </div>
        <!-- /store products -->
        <!-- store bottom filter -->
        <div class="store-filter">
            <span class="store-qty">Showing 20-100 products</span>
            <ul class="store-pagination">
                <li><a href="#"><i class="fa fa-angle-left"></i></a></li>
                <li class="active">1</li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#"><i class="fa fa-angle-right"></i></a></li>
            </ul>
        </div>
        <!-- /store bottom filter -->
    </div>
    <!-- /STORE -->
</div>
<script>
    const cardCategories = document.querySelector('div.card-body')

    cardCategories.addEventListener('click', function (event) {

        //if (event.target.classList.classList.contains('form-check')) {
            const element = event.target;
            //console.log(element.value);

            window.location.replace(`filterbycatogery?cat=${element.value}`);
        //}

    });


    const cardPrice = document.querySelectorAll('div.card-body')[1];
    const btnApplay = document.querySelectorAll('button.btn.btn')[0];
    const btnMin = document.querySelector('#price-min');
    const btnMax = document.querySelector('#price-max');

    btnApplay.addEventListener('click', function (event) {
        console.log('my event lisner');
        window.location.replace(`filterbyprice?max=${btnMax.value}&min=${btnMin.value}`);
    });

</script>